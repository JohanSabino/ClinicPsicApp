# IE-GA7-220501096-AA1-EV02
## DEFINIR ESTÁNDARES DE CODIFICACIÓN DE ACUERDO A PLATAFORMA DE DESARROLLO ELEGIDA

**Aprendiz:** Johan Camilo Daza Sabino  
**Código:** 220501096  
**Programa:** Análisis y desarrollo de software  
**Proyecto Formativo:** Construcción de software integrador de tecnologías orientadas a servicios  
**Fase del Proyecto:** Ejecución  
**Resultado de Aprendizaje:** 220501096-01 Planear actividades de construcción del software de acuerdo con el diseño establecido  
**Actividad de Aprendizaje:** GA7-220501096-AA1- Configurar herramientas de versionamiento para control de código  
**Evidencia de Desempeño:** Definir estándares de codificación de acuerdo a plataforma de desarrollo elegida GA7-220501096-AA1-EV02  
**Instructor:** [Nombre del Instructor]  
**Fecha:** 30 de Septiembre de 2025

---

## 1. INTRODUCCIÓN

Los estándares de codificación son fundamentales para mantener la calidad, legibilidad y mantenibilidad del código en el proyecto ClinicPsicApp. Este documento define las convenciones específicas para la plataforma Laravel/PHP seleccionada, estableciendo reglas claras para el desarrollo colaborativo.

## 2. OBJETIVO

Definir estándares de codificación específicos para la plataforma Laravel/PHP que garanticen consistencia, legibilidad y mantenibilidad del código en el proyecto ClinicPsicApp.

## 3. DESARROLLO

### 3.1 Estándares de Codificación según Lenguaje PHP

**PSR-12: Extended Coding Style**

Se eligió PSR-12 como estándar principal porque es la evolución más reciente y completa de los estándares PHP, reemplazando a PSR-2. Garantiza compatibilidad con las versiones modernas de PHP (8.x), incluye soporte para tipado estricto y nuevas características del lenguaje, y es ampliamente adoptado por el ecosistema Laravel y la comunidad PHP profesional.

El proyecto ClinicPsicApp adopta el estándar PSR-12 para PHP, que incluye:

**Estructura de Archivos:**
```php
<?php

declare(strict_types=1);

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Http\Response;
use Illuminate\Support\Facades\Validator;

/**
 * Controlador para gestión de pacientes
 * 
 * Maneja todas las operaciones CRUD relacionadas con pacientes
 * incluyendo validación, almacenamiento y visualización de datos.
 * 
 * @package App\Http\Controllers
 * @author Johan Camilo Daza Sabino
 * @version 1.0.0
 */
class PatientController extends Controller
{
    /**
     * Muestra una lista de todos los pacientes
     * 
     * @return Response
     */
    public function index(): Response
    {
        $patients = $this->getPatientData();
        
        return response()->view('patients.index', [
            'patients' => $patients,
        ]);
    }
    
    /**
     * Almacena un nuevo paciente en el sistema
     * 
     * @param Request $request Datos del formulario
     * @return RedirectResponse
     */
    public function store(Request $request): RedirectResponse
    {
        $validatedData = $this->validatePatientData($request);
        
        // Lógica de almacenamiento
        $patient = $this->createPatient($validatedData);
        
        return redirect()
            ->route('patients.index')
            ->with('success', 'Paciente creado exitosamente');
    }
}
```

### 3.2 Nomenclatura para Variables y Constantes

**Variables en PHP (camelCase):**
```php
<?php

// Variables descriptivas
$patientName = 'Juan Carlos Pérez';
$birthDate = '1985-03-15';
$emailAddress = 'juan.perez@email.com';
$isActivePatient = true;
$appointmentCount = 0;

// Arrays asociativos
$patientData = [
    'first_name' => 'Juan Carlos',
    'last_name' => 'Pérez González',
    'document_type' => 'CC',
    'document_number' => '12345678',
    'email' => 'juan.perez@email.com',
    'phone' => '+57 300 123 4567'
];

// Objetos de request
$validatedRequest = $request->validated();
$userInput = $request->input('patient_name');
$sessionData = $request->session()->all();
```

**Constantes (UPPER_SNAKE_CASE):**
```php
<?php

// Constantes de configuración
const MAX_PATIENTS_PER_PAGE = 25;
const DEFAULT_APPOINTMENT_DURATION = 60; // minutos
const PATIENT_STATUS_ACTIVE = 'active';
const PATIENT_STATUS_INACTIVE = 'inactive';
const PATIENT_STATUS_PENDING = 'pending';

// Constantes de validación
const MIN_PASSWORD_LENGTH = 8;
const MAX_UPLOAD_SIZE = 2048; // KB
const ALLOWED_FILE_TYPES = ['jpg', 'jpeg', 'png', 'pdf'];

// Constantes de base de datos
const PATIENTS_TABLE = 'patients';
const APPOINTMENTS_TABLE = 'appointments';
const PSYCHOLOGISTS_TABLE = 'psychologists';
```

### 3.3 Nomenclatura para Clases, Métodos y Comentarios

**Clases (PascalCase):**
```php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

/**
 * Modelo Patient
 * 
 * Representa un paciente en el sistema de gestión clínica.
 * Incluye relaciones con citas médicas y historiales clínicos.
 * 
 * @property int $id
 * @property string $first_name
 * @property string $last_name
 * @property string $email
 * @property string $document_number
 * @property string $phone
 * @property Carbon $created_at
 * @property Carbon $updated_at
 */
class Patient extends Model
{
    /**
     * Campos asignables masivamente
     * 
     * @var array<string>
     */
    protected $fillable = [
        'first_name',
        'last_name',
        'email',
        'document_number',
        'phone',
        'birth_date',
        'status'
    ];

    /**
     * Obtiene las citas asociadas al paciente
     * 
     * @return HasMany
     */
    public function appointments(): HasMany
    {
        return $this->hasMany(Appointment::class);
    }
    
    /**
     * Obtiene el nombre completo del paciente
     * 
     * @return string
     */
    public function getFullNameAttribute(): string
    {
        return "{$this->first_name} {$this->last_name}";
    }
    
    /**
     * Verifica si el paciente está activo
     * 
     * @return bool
     */
    public function isActive(): bool
    {
        return $this->status === self::STATUS_ACTIVE;
    }
}
```

**Métodos (camelCase con verbos descriptivos):**
```php
<?php

class AppointmentService
{
    /**
     * Crea una nueva cita médica
     * 
     * @param array $appointmentData Datos de la cita
     * @return Appointment
     */
    public function createAppointment(array $appointmentData): Appointment
    {
        return Appointment::create($appointmentData);
    }
    
    /**
     * Actualiza el estado de una cita
     * 
     * @param int $appointmentId ID de la cita
     * @param string $newStatus Nuevo estado
     * @return bool
     */
    public function updateAppointmentStatus(int $appointmentId, string $newStatus): bool
    {
        $appointment = $this->findAppointmentById($appointmentId);
        
        return $appointment->update(['status' => $newStatus]);
    }
    
    /**
     * Busca citas por rango de fechas
     * 
     * @param Carbon $startDate Fecha inicial
     * @param Carbon $endDate Fecha final
     * @return Collection
     */
    public function findAppointmentsByDateRange(Carbon $startDate, Carbon $endDate): Collection
    {
        return Appointment::whereBetween('appointment_date', [$startDate, $endDate])
            ->orderBy('appointment_date')
            ->get();
    }
}
```

### 3.4 Estándares Frontend (JavaScript/Blade)

**JavaScript ES6+ Conventions:**

Se adoptó ES6+ como estándar JavaScript porque proporciona sintaxis moderna más limpia y legible (clases, arrow functions, const/let), mejor manejo de asincronía con Promises, compatibilidad nativa con módulos, y soporte completo en navegadores modernos. Además, es el estándar recomendado para proyectos Laravel con Vite como bundler.
```javascript
/**
 * Validador de formularios para ClinicPsicApp
 * 
 * Clase utilitaria para validación en tiempo real de formularios
 * con soporte para múltiples tipos de campos y reglas personalizadas.
 * 
 * @class FormValidator
 * @author Johan Camilo Daza Sabino
 * @version 1.0.0
 */
class FormValidator {
    /**
     * Constructor del validador
     * 
     * @param {string} formSelector - Selector CSS del formulario
     * @param {Object} validationRules - Reglas de validación personalizadas
     */
    constructor(formSelector, validationRules = {}) {
        this.form = document.querySelector(formSelector);
        this.validationRules = validationRules;
        this.errorMessages = new Map();
        
        this.initializeValidation();
    }
    
    /**
     * Inicializa los event listeners del formulario
     * 
     * @private
     * @returns {void}
     */
    initializeValidation() {
        if (!this.form) {
            console.error(`Formulario no encontrado: ${formSelector}`);
            return;
        }
        
        this.form.addEventListener('submit', this.handleFormSubmit.bind(this));
        this.form.addEventListener('input', this.handleFieldInput.bind(this));
    }
    
    /**
     * Valida un campo específico
     * 
     * @param {HTMLElement} field - Campo a validar
     * @returns {boolean} - true si es válido, false si no
     */
    validateField(field) {
        const fieldName = field.name;
        const fieldValue = field.value.trim();
        const fieldType = field.type;
        
        // Validación específica por tipo
        switch (fieldType) {
            case 'email':
                return this.validateEmail(fieldValue);
            case 'tel':
                return this.validatePhone(fieldValue);
            case 'password':
                return this.validatePassword(fieldValue);
            default:
                return this.validateRequired(fieldValue);
        }
    }
    
    /**
     * Valida formato de email
     * 
     * @param {string} email - Email a validar
     * @returns {boolean}
     */
    validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
}

// Inicialización del validador
document.addEventListener('DOMContentLoaded', () => {
    const patientFormValidator = new FormValidator('#patient-form', {
        email: { required: true, format: 'email' },
        phone: { required: false, format: 'phone' },
        document: { required: true, minLength: 6 }
    });
});
```

**Blade Templates (Laravel Conventions):**

Se utilizan las convenciones oficiales de Laravel Blade porque garantizan integración perfecta con el framework, aprovechan características específicas como componentes, slots y directivas, mantienen separación clara entre lógica y presentación, y facilitan el mantenimiento al seguir patrones reconocidos por la comunidad Laravel.
```blade
{{-- 
    Vista: patients/index.blade.php
    Propósito: Listado principal de pacientes
    Autor: Johan Camilo Daza Sabino
    Fecha: 30/09/2025
--}}

<x-app-layout>
    {{-- Slot del header con título y acciones --}}
    <x-slot name="header">
        <div class="flex justify-between items-center">
            <h2 class="font-semibold text-xl text-gray-800 leading-tight">
                {{ __('Gestión de Pacientes') }}
            </h2>
            
            {{-- Botón de nueva acción --}}
            <x-primary-button 
                :href="route('patients.create')"
                class="flex items-center">
                <x-heroicon-o-plus class="w-5 h-5 mr-2" />
                {{ __('Nuevo Paciente') }}
            </x-primary-button>
        </div>
    </x-slot>

    {{-- Contenido principal --}}
    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            
            {{-- Componente de alertas --}}
            <x-alert-success :message="session('success')" />
            
            {{-- Grid de estadísticas --}}
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                @foreach($patientStats as $stat)
                    <x-stats-card 
                        :title="$stat['title']"
                        :value="$stat['value']"
                        :color="$stat['color']"
                        :icon="$stat['icon']" />
                @endforeach
            </div>
            
            {{-- Tabla de pacientes --}}
            <x-patients-table 
                :patients="$patients"
                :columns="['name', 'email', 'phone', 'status', 'actions']"
                :sortable="true"
                :filterable="true" />
        </div>
    </div>
</x-app-layout>
```

### 3.5 Configuración de Herramientas de Formato

**PHP CS Fixer (.php-cs-fixer.php):**

Se implementó PHP CS Fixer como herramienta automatizada porque aplica automáticamente los estándares PSR-12 sin intervención manual, reduce significativamente el tiempo de revisión de código, elimina inconsistencias de formato entre desarrolladores, y se integra perfectamente con editores de código y pipelines de CI/CD para mantener calidad constante.
```php
<?php

return (new PhpCsFixer\Config())
    ->setRules([
        '@PSR12' => true,
        'array_syntax' => ['syntax' => 'short'],
        'ordered_imports' => ['sort_algorithm' => 'alpha'],
        'no_unused_imports' => true,
        'not_operator_with_successor_space' => true,
        'trailing_comma_in_multiline' => true,
        'phpdoc_scalar' => true,
        'unary_operator_spaces' => true,
        'binary_operator_spaces' => true,
        'blank_line_before_statement' => [
            'statements' => ['break', 'continue', 'declare', 'return', 'throw', 'try'],
        ],
    ])
    ->setFinder(
        PhpCsFixer\Finder::create()
            ->in(__DIR__)
            ->exclude('vendor')
            ->exclude('bootstrap/cache')
            ->exclude('storage')
    );
```

**ESLint Configuration (.eslintrc.js):**

Se configuró ESLint como herramienta de análisis estático porque detecta errores potenciales antes de la ejecución, asegura consistencia en el estilo de código JavaScript, identifica malas prácticas y vulnerabilidades, es estándar de la industria para proyectos JavaScript/Node.js, y se integra nativamente con VS Code y sistemas de build modernos como Vite.
```javascript
module.exports = {
    env: {
        browser: true,
        es2021: true,
        node: true
    },
    extends: [
        'eslint:recommended'
    ],
    parserOptions: {
        ecmaVersion: 12,
        sourceType: 'module'
    },
    rules: {
        'indent': ['error', 4],
        'quotes': ['error', 'single'],
        'semi': ['error', 'always'],
        'no-unused-vars': 'error',
        'no-console': 'warn',
        'camelcase': 'error',
        'prefer-const': 'error',
        'no-var': 'error'
    }
};
```

---

## CAPTURAS

### Captura 1: Código PHP con PSR-12
![PHP PSR-12](capturas/php-psr12-standards.png)
*Archivo PHP mostrando estándares PSR-12 aplicados.*

### Captura 2: Nomenclatura de Variables
![Variables Nomenclatura](capturas/variables-nomenclatura.png)
*Ejemplos de nomenclatura camelCase en variables PHP.*

### Captura 3: Documentación de Métodos
![Documentación Métodos](capturas/metodos-documentacion.png)
*Métodos con comentarios PHPDoc completos.*

### Captura 4: Configuración de Herramientas
![Herramientas Formato](capturas/herramientas-formato.png)
*Archivos de configuración PHP CS Fixer y ESLint.*